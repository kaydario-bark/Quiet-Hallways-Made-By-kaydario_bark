<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Quiet Hallways</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- GAS-safe favicon (external URL only) -->
<link rel="icon" type="image/png"
      href="https://drive.google.com/uc?export=view&id=YOUR_ICON_FILE_ID">

<meta name="theme-color" content="#000000">

<style>
body {
  margin: 0;
  background: #020202;
  color: #e2e2e2;
  font-family: monospace;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

/* Screens */
#loading, #endfade {
  position: fixed;
  inset: 0;
  background: #000;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  transition: opacity 2s ease;
  z-index: 20;
}

#endfade {
  opacity: 0;
  pointer-events: none;
}

/* Main */
#container {
  width: 90%;
  max-width: 620px;
  opacity: 0;
  transition: opacity 2s ease;
}

#text {
  font-size: 15px;
  line-height: 1.75;
  white-space: pre-wrap;
  opacity: 0;
  transition: opacity 2s ease;
}

#choices {
  margin-top: 26px;
  opacity: 0;
  transition: opacity 1.5s ease;
}

/* Choices */
.choice {
  display: block;
  width: 100%;
  background: none;
  border: none;
  color: #c9c9c9;
  font-size: 14px;
  padding: 6px 0;
  text-align: left;
  cursor: pointer;
}
.choice::before { content: "> "; color: #9b9b9b; }
.choice:hover,
.choice:hover::before { color: #fff; }

/* UI */
#ui {
  position: fixed;
  top: 10px;
  right: 14px;
  font-size: 12px;
  color: #777;
  cursor: pointer;
}

#installBtn {
  position: fixed;
  bottom: 12px;
  right: 14px;
  font-size: 12px;
  color: #aaa;
  cursor: pointer;
  display: none;
}

/* End buttons */
.end-btn {
  margin-top: 16px;
  background: none;
  border: 1px solid #555;
  color: #ccc;
  padding: 8px 14px;
  cursor: pointer;
  font-family: monospace;
}
.end-btn:hover {
  border-color: #fff;
  color: #fff;
}
</style>
</head>

<body>

<div id="loading">
  <div style="font-size:22px;letter-spacing:2px;">QUIET HALLWAYS</div>
  <div style="font-size:12px;color:#777;margin-top:6px;">
    a short interactive story
  </div>
</div>

<div id="endfade"></div>

<div id="ui">ðŸ”Š sound on</div>
<div id="installBtn">â¬‡ install app</div>

<div id="container">
  <div id="text"></div>
  <div id="choices"></div>
</div>

<!-- Audio -->
<audio id="clickSound" preload="auto"
  src="https://audio.jukehost.co.uk/OslPSf81kCBvMIu5oQyylhU0dOfka4hi"></audio>

<audio id="rainSound" preload="auto" loop
  src="https://audio.jukehost.co.uk/b6JC1G5wnlfr13w5afixMozaOnD9sfb3"></audio>

<audio id="pianoSound" preload="auto" loop
  src="https://audio.jukehost.co.uk/hheozlHHWYw947TPhiaOMtS3g2wiKwLU"></audio>

<script>
let soundOn = true;
let audioUnlocked = false;
let gameEnded = false;

const ui = document.getElementById("ui");
const installBtn = document.getElementById("installBtn");
const clickSound = document.getElementById("clickSound");
const rainSound = document.getElementById("rainSound");
const pianoSound = document.getElementById("pianoSound");
const textEl = document.getElementById("text");
const choicesEl = document.getElementById("choices");
const endfade = document.getElementById("endfade");

/* Unlock audio (mobile-safe) */
function unlockAudio() {
  if (audioUnlocked) return;
  audioUnlocked = true;

  rainSound.volume = 0.35;
  pianoSound.volume = 0.15;

  if (soundOn) {
    rainSound.play().catch(()=>{});
    pianoSound.play().catch(()=>{});
  }
}
["click","touchstart","keydown"].forEach(e =>
  document.addEventListener(e, unlockAudio, { once:true })
);

/* Sound toggle */
ui.onclick = () => {
  soundOn = !soundOn;
  ui.textContent = soundOn ? "ðŸ”Š sound on" : "ðŸ”‡ sound off";
  soundOn ? (rainSound.play(), pianoSound.play())
          : (rainSound.pause(), pianoSound.pause());
};

function playClick() {
  if (soundOn) {
    clickSound.currentTime = 0;
    clickSound.play();
  }
}

/* Scenes */
const scenes = {
  hospital:{
    text:`You sit up in a hospital bed.

Rain taps against a window.

Well, Your name is Dario.
And, You're 16.

"You have urinary incontinence, well, isnt this fucking stupid. hah!."

A diagnosis.
Not a choice.`,
    choices:[["Stare at the ceiling","hospital2"],["Ask if it stops","hospital2"]]
  },
  hospital2:{ text:`They say it isnâ€™t your fault.`, choices:[["Go home","home"]] },
  home:{
    text:`Your mom sits beside you.
"You donâ€™t have to go."

You feel okay.`,
    choices:[["Stay home","end_home"],["Go to school","hallway"]]
  },
  hallway:{
    text:`The hallway is loud.
Someone notices.`,
    choices:[["Keep walking","classroom"],["Let it hurt","end_alone"]]
  },
  classroom:{
    text:`You sit carefully.`,
    choices:[["Focus","end_strength"],["Text someone","end_support"]]
  },

  end_home:{ text:`You stayed safe.`, choices:[["Credits","credits"]] },
  end_alone:{ text:`You shouldnâ€™t have to carry it alone.`, choices:[["Credits","credits"]] },
  end_strength:{ text:`You kept going.`, choices:[["Credits","credits"]] },
  end_support:{ text:`You werenâ€™t invisible.`, choices:[["Credits","credits"]] },

  credits:{
    text:`Quiet Hallways

UI Creator: KayDario_Bark
Game Coder: KayDario_Bark
Scripter for Audio: KayDario_Bark
Audio Holders: KayDario_Bark
Founder: KayDario_Bark`,
    choices:[]
  }
};

function showScene(key) {
  if (gameEnded) return;
  const s = scenes[key];

  textEl.style.opacity = 0;
  choicesEl.style.opacity = 0;

  setTimeout(()=>{ textEl.textContent = s.text; textEl.style.opacity = 1; },500);
  setTimeout(()=>{
    choicesEl.innerHTML="";
    s.choices.forEach(c=>{
      const b=document.createElement("button");
      b.className="choice";
      b.textContent=c[0];
      b.onclick=()=>{
        playClick();
        showScene(c[1]);
        if (c[1]==="credits") endGame();
      };
      choicesEl.appendChild(b);
    });
    choicesEl.style.opacity=1;
  },1500);
}

/* Audio fade */
function fadeOut(audio){
  const i=setInterval(()=>{
    if(audio.volume>0.02) audio.volume-=0.02;
    else{audio.pause();clearInterval(i);}
  },120);
}

/* End game */
function endGame(){
  gameEnded=true;

  setTimeout(()=>{
    fadeOut(rainSound);
    fadeOut(pianoSound);
    textEl.style.opacity=0;
    choicesEl.innerHTML=`
      <button class="end-btn"
        onclick="window.location.href='https://discord.gg/2GCXmGArfw'">
        Join Discord
      </button>`;
  },7000);

  setTimeout(()=> endfade.style.opacity=1, 10000);
}

/* Loading */
setTimeout(()=>{
  document.getElementById("loading").style.opacity=0;
  document.getElementById("container").style.opacity=1;
  setTimeout(()=>{
    document.getElementById("loading").remove();
    showScene("hospital");
  },2000);
},1200);

/* Fake install button (GAS-safe) */
installBtn.style.display = "block";
installBtn.onclick = () =>
  alert("To install:\nOpen menu â†’ Add to Home Screen");
</script>

</body>
</html>
